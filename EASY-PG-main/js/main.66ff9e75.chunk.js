(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{17:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),a=n(11),c=n.n(a),i=n(2),o=n(3),l=n(5),d=n(4),j=".",u=n(6),m=n(0),b=function(e){return Object(m.jsxs)("div",{className:"filter-bar row justify-content-around",children:[Object(m.jsxs)("div",{className:"col-auto"+("none"!==e.currentFilter.gender?" sort-active":""),"data-toggle":"modal","data-target":"#filter-modal",children:[Object(m.jsx)("img",{src:"./img/filter.png",alt:"filter"}),Object(m.jsx)("span",{children:"Filter"})]}),Object(m.jsxs)("div",{className:"col-auto"+("desc"===e.currentSort?" sort-active":""),onClick:function(){return e.updateSort("desc")},children:[Object(m.jsx)("img",{src:"./img/desc.png",alt:"sort-desc"}),Object(m.jsx)("span",{children:"Highest rent first"})]}),Object(m.jsxs)("div",{className:"col-auto"+("asc"===e.currentSort?" sort-active":""),onClick:function(){return e.updateSort("asc")},children:[Object(m.jsx)("img",{src:"./img/asc.png",alt:"sort-asc"}),Object(m.jsx)("span",{children:"Lowest rent first"})]})]})},p=function(e){return Object(m.jsx)("div",{className:"modal fade",id:"filter-modal",tabIndex:"-1",role:"dialog","aria-labelledby":"filter-heading","aria-hidden":"true",children:Object(m.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(m.jsxs)("div",{className:"modal-content",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h3",{className:"modal-title",id:"filter-heading",children:"Filters"}),Object(m.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(m.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(m.jsxs)("div",{className:"modal-body",children:[Object(m.jsx)("h5",{children:"Gender"}),Object(m.jsx)("hr",{}),Object(m.jsxs)("div",{children:[Object(m.jsx)("button",{className:"btn btn-outline-dark"+("none"===e.currentFilter.gender?" btn-active":""),onClick:function(){return e.updateFilter("none")},children:"No Filter"}),Object(m.jsxs)("button",{className:"btn btn-outline-dark"+("unisex"===e.currentFilter.gender?" btn-active":""),onClick:function(){return e.updateFilter("unisex")},children:[Object(m.jsx)("i",{className:"fas fa-venus-mars"}),"Unisex"]}),Object(m.jsxs)("button",{className:"btn btn-outline-dark"+("male"===e.currentFilter.gender?" btn-active":""),onClick:function(){return e.updateFilter("male")},children:[Object(m.jsx)("i",{className:"fas fa-mars"}),"Male"]}),Object(m.jsxs)("button",{className:"btn btn-outline-dark"+("female"===e.currentFilter.gender?" btn-active":""),onClick:function(){return e.updateFilter("female")},children:[Object(m.jsx)("i",{className:"fas fa-venus"}),"Female"]})]})]}),Object(m.jsx)("div",{className:"modal-footer",children:Object(m.jsx)("button",{"data-dismiss":"modal",className:"btn btn-success",children:"Okay"})})]})})})},h=function(e){for(var t,n=[],r=0;r<5;r++)t=e.rating>=r+.8?Object(m.jsx)("i",{className:"fas fa-star"},r):e.rating>=r+.3?Object(m.jsx)("i",{className:"fas fa-star-half-alt"},r):Object(m.jsx)("i",{className:"far fa-star"},r),n.push(t);return Object(m.jsx)("div",{className:"star-container",title:e.rating,children:n})},f=function(e){var t;return t=e.is_interested?"fas":"far",Object(m.jsxs)("div",{className:"interested-container",children:[Object(m.jsx)("i",{className:"is-interested-image ".concat(t," fa-heart"),onClick:function(){return e.toggleInterested()}}),Object(m.jsxs)("div",{className:"interested-text",children:[Object(m.jsx)("span",{className:"interested-user-count",children:e.user_count})," interested"]})]})},g=function(e){var t=0;0!==e.property.rating_clean&&t++,0!==e.property.rating_food&&t++,0!==e.property.rating_safety&&t++,0!==e.property.rating_service&&t++,0===t&&t++;var n,r=(parseFloat(e.property.rating_clean)+parseFloat(e.property.rating_food)+parseFloat(e.property.rating_safety))/t;r=(r=Math.round(10*r)/10).toFixed(1),n="male"===e.property.gender?Object(m.jsx)("img",{src:"./img/male.png",alt:"male"}):"female"===e.property.gender?Object(m.jsx)("img",{src:"./img/female.png",alt:"female"}):Object(m.jsx)("img",{src:"./img/unisex.png",alt:"unisex"});var s=(new Intl.NumberFormat).format(e.property.rent);return Object(m.jsxs)("div",{className:"property-card property-id-".concat(e.property.id," row"),children:[Object(m.jsx)("div",{className:"image-container col-md-4",children:Object(m.jsx)("img",{src:"./"+e.property.image,alt:"property"})}),Object(m.jsxs)("div",{className:"content-container col-md-8",children:[Object(m.jsxs)("div",{className:"row no-gutters justify-content-between",children:[Object(m.jsx)(h,{rating:r}),Object(m.jsx)(f,{is_interested:e.property.is_interested,toggleInterested:e.toggleInterested,user_count:e.property.interested_users_count})]}),Object(m.jsxs)("div",{className:"detail-container",children:[Object(m.jsx)("div",{className:"property-name",children:e.property.name}),Object(m.jsx)("div",{className:"property-address",children:e.property.address}),Object(m.jsx)("div",{className:"property-gender",children:n})]}),Object(m.jsxs)("div",{className:"row no-gutters",children:[Object(m.jsxs)("div",{className:"rent-container col-6",children:[Object(m.jsxs)("div",{className:"rent",children:["\u20b9 ",s,"/-"]}),Object(m.jsx)("div",{className:"rent-unit",children:"per month"})]}),Object(m.jsx)("div",{className:"button-container col-6",children:Object(m.jsx)("a",{href:"property_detail.php?property_id="+e.property.id,className:"btn btn-primary",children:"View"})})]})]})]})},O=function(){return Object(m.jsx)("div",{className:"no-property-container",children:Object(m.jsx)("p",{children:"No PG to list"})})},x=(r.Component,n(9),function(){return Object(m.jsx)("div",{className:"no-property-container",children:Object(m.jsx)("p",{children:"No MESS to list"})})}),v=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={messes:[],sort:"none",filter:{gender:"none"}},e.toggleInterested=function(t){fetch("".concat(j,"/api/toggle_interested_mess.php?mess_id=").concat(t)).then((function(e){return e.json()})).then((function(n){n.success?(console.log("Success"),e.updateInterested(t)):n.success||n.is_logged_in||(console.log("Not logged in!"),window.$("#login-modal").modal("show"))})).catch((function(e){console.log("Error fetching and parsing data",e)}))},e.updateInterested=function(t){var n=Object(u.a)(e.state.messes);n.forEach((function(e){e.id===t&&(e.is_interested=!e.is_interested,e.is_interested?e.interested_users_count++:e.interested_users_count--)})),e.setState({messes:n})},e.updateSort=function(t){e.setState({sort:t})},e.updateFilter=function(t){e.setState({filter:{gender:t}})},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=window.location.search,n=new URLSearchParams(t).get("city");fetch("".concat(j,"/api/get_messes_by_city.php?city=").concat(n)).then((function(e){return e.json()})).then((function(t){e.setState({messes:t})})).catch((function(e){console.log("Error fetching and parsing data",e)}))}},{key:"render",value:function(){var e,t=this,n=Object(u.a)(this.state.messes);return"none"!==this.state.sort&&("desc"===this.state.sort?n.sort((function(e,t){return t.rent-e.rent})):n.sort((function(e,t){return e.rent-t.rent}))),"none"!==this.state.filter.gender&&(n=n.filter((function(e){return e.gender===t.state.filter.gender}))),e=n.length>0?n.map((function(e){e.is_owner,e.id})):Object(m.jsx)(x,{}),Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"page-container",children:e})})}}]),n}(r.Component),N=v,y=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(N,{})})}}]),n}(r.Component),_=y;c.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(_,{})}),document.getElementById("root1"))}},[[17,1,2]]]);
//# sourceMappingURL=main.66ff9e75.chunk.js.map
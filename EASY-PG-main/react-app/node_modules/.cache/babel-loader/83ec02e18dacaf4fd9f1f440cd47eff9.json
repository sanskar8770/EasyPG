{"ast":null,"code":"var _this=this;import React from'react';import Stars from'./Stars';import Interested from'./Interested';import{base_path}from'./utils.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var messCard=function messCard(props){// let den=0;\n// if(props.mess.rating_clean!==0)\n// den++;\n// if(props.mess.rating_food!==0)\n// den++;\n// if(props.mess.rating_safety!==0)\n// den++;\n// if(props.mess.rating_service!==0)\n// den++;\n// if(den==0)\n// den++;\nstate={menu:props.mess.menu};updateMenu=function updateMenu(event){fetch(\"\".concat(base_path,\"/api/update_menu.php?mess_id=\").concat(props.mess.id,\"&menu=\").concat(event.target.value)).then(function(response){return response.json();}).then(function(responseData){if(responseData.success){console.log('Success');_this.setState({menu:event.target.value});}// } else if (!responseData.success && !responseData.is_logged_in) {\n//     console.log('Not logged in!');\n//     window.$(\"#login-modal\").modal(\"show\");\n// }\n}).catch(function(error){console.log('Error fetching and parsing data',error);});};var total_rating=(parseFloat(props.mess.rating_food)+parseFloat(props.mess.rating_service))/2;total_rating=Math.round(total_rating*10)/10;total_rating=total_rating.toFixed(1);var gender_image;if(props.mess.gender===\"male\"){gender_image=/*#__PURE__*/_jsx(\"img\",{src:base_path+\"/img/male.png\",alt:\"male\"});}else if(props.mess.gender===\"female\"){gender_image=/*#__PURE__*/_jsx(\"img\",{src:base_path+\"/img/female.png\",alt:\"female\"});}else{gender_image=/*#__PURE__*/_jsx(\"img\",{src:base_path+\"/img/unisex.png\",alt:\"unisex\"});}var charge=new Intl.NumberFormat().format(props.mess.charge);var charge_breakfast=new Intl.NumberFormat().format(props.mess.charge_breakfast);var charge_monthly=new Intl.NumberFormat().format(props.mess.charge_monthly);return/*#__PURE__*/_jsxs(\"div\",{className:\"mess-card mess-id-\".concat(props.mess.id,\" row\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"image-container col-md-4\",children:/*#__PURE__*/_jsx(\"img\",{src:base_path+\"/\"+props.mess.image,alt:\"mess\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"content-container col-md-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row no-gutters justify-content-between\",children:[/*#__PURE__*/_jsx(Stars,{rating:total_rating}),/*#__PURE__*/_jsx(Interested,{is_interested:props.mess.is_interested,toggleInterested:props.toggleInterested,user_count:props.mess.interested_users_count})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mess-name\",children:props.mess.name}),/*#__PURE__*/_jsx(\"div\",{className:\"mess-address\",children:props.mess.address})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row no-gutters\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"charge-container col-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"charge\",children:[\"Monthly : \\u20B9 \",charge_monthly,\"/-\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"charge-unit\",children:\"includes lunch and dinner\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"charge-container col-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"charge\",children:[\"Lunch/Dinner : \\u20B9 \",charge,\"/-\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"charge-container col-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"charge\",children:[\"Breakfast : \\u20B9 \",charge_breakfast,\"/-\"]})}),\"if(props.mess.is_owner)\",/*#__PURE__*/_jsx(\"div\",{className:\"charge-container col-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"charge\",children:[\"Menu\",/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",type:\"text\",value:_this.state.menu,onChange:updateMenu(_this)})]})}),\"else\",/*#__PURE__*/_jsx(\"div\",{className:\"charge-container col-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"charge\",children:[\"Menu\",/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",type:\"text\",placeholder:props.mess.menu,readonly:true})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"button-container col-6\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"btn btn-primary\",children:\"Order\"})})]})]})]});};export default messCard;","map":{"version":3,"sources":["C:/xampp/htdocs/EasyPG/EASY-PG-main/react-app/src/messCard.js"],"names":["React","Stars","Interested","base_path","messCard","props","state","menu","mess","updateMenu","event","fetch","id","target","value","then","response","json","responseData","success","console","log","setState","catch","error","total_rating","parseFloat","rating_food","rating_service","Math","round","toFixed","gender_image","gender","charge","Intl","NumberFormat","format","charge_breakfast","charge_monthly","image","is_interested","toggleInterested","interested_users_count","name","address"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Stars from './Stars';\r\nimport Interested from './Interested';\r\nimport { base_path } from './utils.js';\r\n\r\nconst messCard = props => {\r\n    // let den=0;\r\n    // if(props.mess.rating_clean!==0)\r\n    // den++;\r\n    // if(props.mess.rating_food!==0)\r\n    // den++;\r\n    // if(props.mess.rating_safety!==0)\r\n    // den++;\r\n    // if(props.mess.rating_service!==0)\r\n    // den++;\r\n    // if(den==0)\r\n    // den++;\r\n    state={\r\n        menu: props.mess.menu\r\n    };\r\n    updateMenu=event =>{\r\n            fetch(`${base_path}/api/update_menu.php?mess_id=${props.mess.id}&menu=${event.target.value}`)\r\n                .then(response => response.json())\r\n                .then(responseData => {\r\n                    if (responseData.success) {\r\n                        console.log('Success');\r\n                        this.setState({\r\n                            menu: event.target.value\r\n                        });\r\n                    }\r\n                    // } else if (!responseData.success && !responseData.is_logged_in) {\r\n                    //     console.log('Not logged in!');\r\n                    //     window.$(\"#login-modal\").modal(\"show\");\r\n                    // }\r\n                })\r\n                .catch(error => {\r\n                    console.log('Error fetching and parsing data', error);\r\n                });\r\n        \r\n       \r\n    }\r\n    let total_rating = (parseFloat(props.mess.rating_food) +parseFloat(props.mess.rating_service)) / 2;\r\n    total_rating = Math.round(total_rating * 10) / 10;\r\n    total_rating = total_rating.toFixed(1);\r\n\r\n    let gender_image;\r\n    if (props.mess.gender === \"male\") {\r\n        gender_image = <img src={base_path + \"/img/male.png\"} alt=\"male\" />;\r\n    } else if (props.mess.gender === \"female\") {\r\n        gender_image = <img src={base_path + \"/img/female.png\"} alt=\"female\" />;\r\n    } else {\r\n        gender_image = <img src={base_path + \"/img/unisex.png\"} alt=\"unisex\" />;\r\n    }\r\n\r\n    let charge = new Intl.NumberFormat().format(props.mess.charge);\r\n    let charge_breakfast = new Intl.NumberFormat().format(props.mess.charge_breakfast);\r\n    let charge_monthly = new Intl.NumberFormat().format(props.mess.charge_monthly);\r\n\r\n    return (\r\n        <div className={`mess-card mess-id-${props.mess.id} row`}>\r\n            <div className=\"image-container col-md-4\">\r\n                <img src={base_path + \"/\" + props.mess.image} alt=\"mess\" />\r\n            </div>\r\n\r\n            <div className=\"content-container col-md-8\">\r\n                <div className=\"row no-gutters justify-content-between\">\r\n                    <Stars rating={total_rating} />\r\n\r\n                    <Interested\r\n                        is_interested={props.mess.is_interested}\r\n                        toggleInterested={props.toggleInterested}\r\n                        user_count={props.mess.interested_users_count}\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"detail-container\">\r\n                    <div className=\"mess-name\">{props.mess.name}</div>\r\n                    <div className=\"mess-address\">{props.mess.address}</div>\r\n                    {/* <div className=\"mess-gender\">\r\n                        {gender_image}\r\n                    </div> */}\r\n                </div>\r\n\r\n                <div className=\"row no-gutters\">\r\n                    <div className=\"charge-container col-6\">\r\n                        <div className=\"charge\">Monthly : ₹ {charge_monthly}/-</div>\r\n                        <div className=\"charge-unit\">includes lunch and dinner</div>\r\n                        \r\n                    </div>\r\n                    <div className=\"charge-container col-6\">\r\n                        <div className=\"charge\">Lunch/Dinner : ₹ {charge}/-</div>\r\n                        \r\n                    </div>\r\n                    <div className=\"charge-container col-6\">\r\n                        <div className=\"charge\">Breakfast : ₹ {charge_breakfast}/-</div>\r\n                        \r\n                    </div>\r\n                    if(props.mess.is_owner){\r\n                        <div className=\"charge-container col-6\">\r\n                        <div className=\"charge\">Menu  \r\n                        \r\n                        <input class=\"form-control\" type=\"text\" value={this.state.menu } onChange={updateMenu(this)} >\r\n                        </input>\r\n                        </div>\r\n                        \r\n                        </div>\r\n                    }\r\n                    else{\r\n                        <div className=\"charge-container col-6\">\r\n                        <div className=\"charge\">Menu  \r\n                        \r\n                        <input class=\"form-control\" type=\"text\" placeholder={ props.mess.menu } readonly>\r\n                        </input>\r\n                        </div>\r\n                        \r\n                        </div>\r\n                    }\r\n                    <div className=\"button-container col-6\">\r\n                        <a href=\"#\" className=\"btn btn-primary\">Order</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default messCard;\r\n"]},"metadata":{},"sourceType":"module"}